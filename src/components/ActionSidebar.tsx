"use client";

import { useEffect, useState } from "react";

export default function ActionSidebar() {
  const [showSidebar, setShowSidebar] = useState(false);

  useEffect(() => {
    // Find the About Us section by its ID
    const aboutUsSection = document.getElementById('about-us');

    if (!aboutUsSection) {
      console.warn('About Us section not found');
      return;
    }

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          // Show sidebar when About Us section is in view
          if (entry.isIntersecting) {
            setShowSidebar(true);
          } else if (entry.boundingClientRect.top > 0) {
            // Hide if we're above the About Us section
            setShowSidebar(false);
          }
        });
      },
      {
        threshold: 0.5, // Trigger when 10% of the section is visible
        rootMargin: "-100px 0px 0px 0px" // Offset from top
      }
    );

    observer.observe(aboutUsSection);

    return () => {
      observer.disconnect();
    };
  }, []);

  return (
    <div
      className={`fixed z-100 right-[20px] top-[40%] flex flex-col items-center justify-center w-[150px] h-[292px] bg-white rounded-[16px] py-[16px] px-[8px] gap-[8px] shadow-[0px_4px_50px_0px_#0000001A] transition-all duration-300 ease-in-out ${
        showSidebar
          ? "opacity-100 translate-x-0"
          : "opacity-0 translate-x-full pointer-events-none"
      }`}
    >
      <div className="rounded-[4px] hover:bg-[#FFF9FE] active:bg-[#FFEDFB] w-full h-[76px] py-[10px] px-[16px] flex flex-col items-start justify-center gap-[10px] cursor-pointer transition-colors">
        <div className="flex flex-row justify-center w-full">
          <svg
            width="25"
            height="25"
            viewBox="0 0 25 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.50296 15.9477C7.23732 15.9705 7.93942 16.2468 8.49149 16.727L8.59989 16.8259L8.61234 16.8376C9.80038 18.0106 9.78477 19.8926 8.76468 21.1018L8.76541 21.1025C8.32266 21.6296 7.71221 22.0164 7.12552 22.303C6.52745 22.5951 5.88225 22.8176 5.30252 22.9834C4.71949 23.1502 4.18121 23.2658 3.79007 23.3401C3.59411 23.3773 3.43331 23.4049 3.31986 23.4228C3.26305 23.4318 3.21751 23.438 3.18582 23.4426C3.17005 23.4449 3.15745 23.4472 3.14847 23.4485C3.14405 23.4491 3.14017 23.4496 3.13748 23.4499H3.13309L3.13236 23.4507C2.82362 23.4919 2.51332 23.3867 2.293 23.1665C2.07267 22.9462 1.96753 22.6353 2.00882 22.3264V22.3249C2.00894 22.324 2.00937 22.3226 2.00955 22.3213C2.00993 22.3186 2.01039 22.3148 2.01102 22.3103C2.01227 22.3013 2.01385 22.2887 2.01615 22.2729C2.02075 22.2413 2.02766 22.1964 2.03665 22.1396C2.05465 22.0261 2.08143 21.8649 2.11868 21.6687C2.19294 21.2776 2.30936 20.7399 2.47611 20.157C2.64195 19.5772 2.86364 18.9314 3.15579 18.3332C3.44236 17.7466 3.82921 17.1361 4.35623 16.6933C4.95542 16.1889 5.72001 15.9235 6.50296 15.9477ZM22.5056 1.95922C23.0554 1.96263 23.4994 2.40922 23.4995 2.95897C23.4995 5.76932 22.7103 10.6655 17.646 14.3745C17.7313 14.7322 17.8294 15.203 17.8965 15.7236C17.9696 16.2909 18.0112 16.9443 17.9514 17.5869C17.8925 18.221 17.7285 18.9189 17.3318 19.5139L17.3311 19.5154C16.6521 20.5303 15.3713 21.1187 14.4768 21.4431C13.9962 21.6174 13.5519 21.7409 13.2288 21.821C13.0667 21.8612 12.9332 21.8911 12.8384 21.9111C12.7909 21.9211 12.7526 21.9285 12.7256 21.9338C12.7122 21.9365 12.7013 21.9389 12.6934 21.9404C12.6896 21.9411 12.6863 21.9414 12.6839 21.9419C12.6826 21.9421 12.6811 21.9425 12.6802 21.9426H12.6795L12.6787 21.9433C12.387 21.9963 12.0868 21.9165 11.8592 21.7266C11.6316 21.5366 11.4995 21.2554 11.4995 20.959V16.3733L9.08548 13.9592H4.49979C4.2034 13.9592 3.92221 13.8278 3.73221 13.6003C3.54223 13.3728 3.46322 13.0724 3.51615 12.7808L4.49979 12.9595L3.51615 12.78V12.7786C3.51631 12.7777 3.51664 12.7762 3.51688 12.7749C3.51734 12.7724 3.51763 12.7692 3.51834 12.7654C3.51984 12.7574 3.5223 12.7466 3.52493 12.7331C3.5302 12.7062 3.53767 12.6684 3.54764 12.6211C3.56764 12.5262 3.59748 12.3923 3.63773 12.23C3.71788 11.9068 3.84131 11.4626 4.01566 10.9819C4.34011 10.0874 4.92921 8.80735 5.94412 8.12841L5.94486 8.12694C6.53982 7.7303 7.23782 7.56699 7.87186 7.50805C8.51454 7.44831 9.16777 7.48912 9.73514 7.56225C10.261 7.63002 10.7363 7.72902 11.0952 7.81493C12.3061 6.10598 13.8895 4.68943 15.7307 3.67675C17.8055 2.53565 20.1378 1.94459 22.5056 1.95922ZM6.44144 17.9465C6.15078 17.9375 5.86695 18.0367 5.64456 18.2241L5.6431 18.2248C5.42023 18.4121 5.18215 18.7419 4.95316 19.2107C4.72972 19.6681 4.54536 20.1944 4.39871 20.707C4.35162 20.8717 4.30962 21.033 4.27127 21.1875C4.42593 21.1491 4.58767 21.1072 4.75247 21.06C5.265 20.9134 5.79075 20.7297 6.24808 20.5063C6.71677 20.2774 7.04663 20.0392 7.23392 19.8164L7.23612 19.8135C7.63179 19.3452 7.59857 18.6548 7.21341 18.2673C7.00381 18.0699 6.72938 17.9555 6.44144 17.9465ZM15.8391 15.509C15.0809 15.9276 14.3002 16.3043 13.4998 16.6362V19.6641C13.5958 19.6327 13.6947 19.5993 13.795 19.563C14.6578 19.25 15.3773 18.8385 15.6685 18.4036C15.8115 18.1886 15.9177 17.8568 15.96 17.4023C16.0015 16.9556 15.975 16.4594 15.9131 15.9792C15.8921 15.8165 15.8656 15.659 15.8391 15.509ZM21.4583 3.99828C19.7911 4.13368 18.1671 4.61959 16.6946 5.42943C14.9187 6.40617 13.4224 7.82143 12.3477 9.53979L12.3418 9.54857C11.6965 10.5565 11.1391 11.6177 10.6748 12.72L12.7403 14.7854C13.8574 14.3216 14.9338 13.7648 15.9571 13.1184C20.1792 10.2807 21.254 6.57163 21.4583 3.99828ZM9.47952 9.54638C8.99944 9.48451 8.50382 9.458 8.05716 9.4995C7.60276 9.54174 7.27026 9.64664 7.05521 9.78954L7.05594 9.79027C6.62086 10.0813 6.20883 10.8008 5.89578 11.6638C5.85942 11.7641 5.82607 11.863 5.79471 11.959H8.8262C9.16257 11.1588 9.54365 10.3786 9.96805 9.62182C9.81273 9.59413 9.64878 9.56819 9.47952 9.54638Z"
              fill="url(#paint0_linear_1984_242)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_1984_242"
                x1="2"
                y1="12.7092"
                x2="23.4995"
                y2="12.7092"
                gradientUnits="userSpaceOnUse"
              >
                <stop stopColor="#F11F68" />
                <stop offset="1" stopColor="#162ABF" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <h1 className="text-[#262626] text-[14px] leading-[22px] font-semibold text-center text-nowrap">
          Start Campaign
        </h1>
      </div>
      <hr className="border-[#E8E8E8] w-full" />
      <div className="rounded-[4px] hover:bg-[#FFF9FE] active:bg-[#FFEDFB] w-full h-[76px] py-[10px] px-[16px] flex flex-col items-start justify-center gap-[10px] cursor-pointer transition-colors">
        <div className="flex flex-row justify-center w-full">
          <svg
            width="25"
            height="25"
            viewBox="0 0 25 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21.4995 12.9587C21.4995 12.2713 21.4199 11.6025 21.2739 10.9592H17.3364C17.4302 11.612 17.4859 12.2728 17.4998 12.9382C17.5 12.9521 17.5 12.9661 17.4998 12.98C17.4859 13.6455 17.4302 14.3062 17.3364 14.959H21.2739C21.42 14.3156 21.4995 13.6463 21.4995 12.9587ZM4.43774 16.9592C5.58308 19.2631 7.68506 21.0064 10.2253 21.668C9.26215 20.22 8.53774 18.63 8.07861 16.9592H4.43774ZM16.9204 16.9592C16.4613 18.6301 15.7369 20.22 14.7737 21.668C17.3142 21.0065 19.4166 19.2633 20.562 16.9592H16.9204ZM10.1653 16.9592C10.6726 18.5605 11.4606 20.0669 12.4995 21.4058C13.5385 20.0668 14.3271 18.5606 14.8345 16.9592H10.1653ZM9.68628 10.9592C9.57816 11.6173 9.51454 12.2852 9.49951 12.9587C9.51452 13.6325 9.57811 14.3007 9.68628 14.959H15.3127C15.4209 14.3007 15.4845 13.6326 15.4995 12.9587C15.4845 12.2852 15.4209 11.6173 15.3127 10.9592H9.68628ZM14.7737 4.24878C15.7373 5.69705 16.4612 7.28774 16.9204 8.95898H20.562C19.4166 6.65476 17.3144 4.91022 14.7737 4.24878ZM12.4995 4.51099C11.4602 5.85015 10.6727 7.35737 10.1653 8.95898H14.8345C14.327 7.35725 13.5389 5.85023 12.4995 4.51099ZM10.2253 4.24878C7.68485 4.9103 5.5831 6.65495 4.43774 8.95898H8.07861C8.53783 7.28778 9.26182 5.69702 10.2253 4.24878ZM3.49951 12.9587C3.49951 13.6464 3.57978 14.3156 3.72583 14.959H7.66333C7.56951 14.3062 7.51387 13.6455 7.5 12.98C7.49971 12.9661 7.49971 12.9521 7.5 12.9382C7.51386 12.2727 7.56953 11.612 7.66333 10.9592H3.7251C3.57912 11.6025 3.49953 12.2713 3.49951 12.9587ZM23.4998 12.9587C23.4998 19.0339 18.5746 23.959 12.4995 23.959C6.42449 23.9589 1.5 19.0338 1.5 12.9587C1.50013 6.8838 6.42457 1.95936 12.4995 1.95923C18.5746 1.95923 23.4996 6.88372 23.4998 12.9587Z"
              fill="url(#paint0_linear_1984_247)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_1984_247"
                x1="1.5"
                y1="12.9591"
                x2="23.4998"
                y2="12.9591"
                gradientUnits="userSpaceOnUse"
              >
                <stop stopColor="#F11F68" />
                <stop offset="1" stopColor="#162ABF" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        <h1 className="text-[#262626] text-[14px] leading-[22px] font-semibold text-center text-nowrap">
          Grow Network
        </h1>
      </div>
      <hr className="border-[#E8E8E8] w-full" />

      <div className="rounded-[4px] hover:bg-[#FFF9FE] active:bg-[#FFEDFB] w-full h-[76px] py-[10px] px-[16px] flex flex-col items-start justify-center gap-[10px] cursor-pointer transition-colors">
        <div className="flex flex-row justify-center w-full">
          <svg
            width="25"
            height="25"
            viewBox="0 0 25 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M2.50001 20.3586V3.95898C2.50001 3.4067 2.94748 2.95923 3.49976 2.95923C4.05205 2.95923 4.49952 3.4067 4.49952 3.95898V20.3586C4.49952 20.6551 4.50025 20.8177 4.50977 20.9343C4.51013 20.9387 4.51088 20.9428 4.51124 20.9468C4.5154 20.9472 4.51976 20.9486 4.52442 20.949C4.641 20.9585 4.80362 20.9592 5.1001 20.9592H21.4998C22.052 20.9592 22.4995 21.4067 22.4995 21.959C22.4995 22.5113 22.052 22.9587 21.4998 22.9587H5.1001C4.83669 22.9587 4.57868 22.9596 4.36182 22.9419C4.13331 22.9232 3.86337 22.8794 3.59205 22.7412C3.21572 22.5495 2.90928 22.243 2.71754 21.8667C2.57936 21.5954 2.53552 21.3254 2.51685 21.0969C2.49915 20.8801 2.50001 20.6221 2.50001 20.3586ZM22.4995 11.9592C22.4994 12.5114 22.052 12.959 21.4998 12.959C20.9476 12.959 20.5001 12.5114 20.5 11.9592V10.3728L16.7727 14.1001C16.6854 14.1874 16.5775 14.2961 16.4753 14.3828C16.3643 14.4771 16.196 14.6031 15.9634 14.6787C15.6621 14.7766 15.3374 14.7766 15.0361 14.6787C14.8035 14.6031 14.6352 14.4771 14.5242 14.3828C14.422 14.2961 14.3141 14.1874 14.2268 14.1001L12.4998 12.373L8.20704 16.6658C7.81651 17.0563 7.18326 17.0563 6.79273 16.6658C6.40237 16.2753 6.40237 15.6427 6.79273 15.2522L11.2268 10.8174C11.3141 10.73 11.422 10.6214 11.5242 10.5347C11.6352 10.4404 11.8037 10.315 12.0361 10.2395C12.2997 10.1539 12.5811 10.1431 12.8491 10.2073L12.9634 10.2395L13.0476 10.2703C13.237 10.3461 13.3782 10.4522 13.4753 10.5347C13.5775 10.6214 13.6854 10.73 13.7727 10.8174L15.4998 12.5444L19.0857 8.95923H17.5C16.9477 8.95923 16.4995 8.51102 16.4995 7.95874C16.4997 7.40657 16.9478 6.95898 17.5 6.95898H21.4998C22.052 6.95898 22.4994 7.40657 22.4995 7.95874V11.9592Z"
              fill="url(#paint0_linear_1984_252)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_1984_252"
                x1="2.5"
                y1="12.959"
                x2="22.4995"
                y2="12.959"
                gradientUnits="userSpaceOnUse"
              >
                <stop stopColor="#F11F68" />
                <stop offset="1" stopColor="#162ABF" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        <h1 className="text-[#262626] text-[14px] leading-[22px] font-semibold text-center text-nowrap">
          Monetize Show
        </h1>
      </div>
    </div>
  );
}
